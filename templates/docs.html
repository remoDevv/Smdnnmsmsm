{% extends "base.html" %}

{% block content %}
<h2>API Documentation</h2>

<div class="card mb-4">
    <div class="card-header">
        <h4>Authentication</h4>
    </div>
    <div class="card-body">
        <p>All API requests require an API key to be sent in the <code>X-API-Key</code> header.</p>
        <pre><code>X-API-Key: your-api-key-here</code></pre>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header">
        <h4>Sign IPA File</h4>
    </div>
    <div class="card-body">
        <h5>Endpoint</h5>
        <pre><code>POST /api/sign</code></pre>

        <h5>Request</h5>
        <p>Content-Type: multipart/form-data</p>
        
        <h5>Parameters</h5>
        <ul>
            <li><code>ipa</code> - The IPA file to sign (file upload)</li>
            <li><code>p12</code> - The P12 certificate file (file upload)</li>
            <li><code>mobileprovision</code> - The mobile provisioning profile (file upload)</li>
            <li><code>p12_password</code> - The password for the P12 certificate (form field)</li>
        </ul>

        <h5>Example Response</h5>
        <pre><code>{
    "status": "success",
    "job_id": 123,
    "message": "IPA signed successfully"
}</code></pre>

        <h5>Rate Limits</h5>
        <ul>
            <li>Regular API keys: 10 requests per day</li>
            <li>Premium API keys: 100 requests per day</li>
        </ul>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header">
        <h4>Getting a Premium API Key</h4>
    </div>
    <div class="card-body">
        <h5>Step 1: Join Our Discord Server</h5>
        <p>Join our Discord server at <a href="https://discord.gg/ndBesNUMw5" target="_blank">https://discord.gg/ndBesNUMw5</a></p>

        <h5>Step 2: Request Premium Access</h5>
        <ol>
            <li>Use the <code>!request_premium</code> command in our Discord server</li>
            <li>Read and accept our terms of service by reacting with âœ…</li>
            <li>Describe how you plan to use the API key</li>
            <li>Once approved, you'll receive your premium API key via Discord DM</li>
        </ol>

        <div class="alert alert-info">
            <h6>Important Notes:</h6>
            <ul>
                <li>Make sure you have DMs enabled from server members</li>
                <li>Keep your API key secure and don't share it with others</li>
                <li>One premium key per Discord account</li>
                <li>Premium keys are subject to our terms of service</li>
            </ul>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h4>Example Usage</h4>
    </div>
    <div class="card-body">
        <pre><code>curl -X POST \
    -H "X-API-Key: your-api-key" \
    -F "ipa=@app.ipa" \
    -F "p12=@cert.p12" \
    -F "mobileprovision=@profile.mobileprovision" \
    -F "p12_password=your-password" \
    https://your-domain.com/api/sign</code></pre>
    </div>
</div>
{% endblock %}
