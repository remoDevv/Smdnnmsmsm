{% extends "base.html" %}

{% block content %}
<h2>API Documentation</h2>

<div class="card mb-4">
    <div class="card-header">
        <h4>Authentication</h4>
    </div>
    <div class="card-body">
        <p>All API requests require an API key to be sent in the <code>X-API-Key</code> header.</p>
        <pre><code>X-API-Key: your-api-key-here</code></pre>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header">
        <h4>Sign IPA File</h4>
    </div>
    <div class="card-body">
        <h5>Endpoint</h5>
        <pre><code>POST /api/sign</code></pre>

        <h5>Request</h5>
        <p>Content-Type: multipart/form-data</p>
        
        <h5>Parameters</h5>
        <ul>
            <li><code>ipa</code> - The IPA file to sign (file upload)</li>
            <li><code>p12</code> - The P12 certificate file (file upload)</li>
            <li><code>mobileprovision</code> - The mobile provisioning profile (file upload)</li>
            <li><code>p12_password</code> - The password for the P12 certificate (form field)</li>
        </ul>

        <h5>Example Response</h5>
        <pre><code>{
    "status": "success",
    "job_id": 123,
    "message": "IPA signed successfully"
}</code></pre>

        <h5>Rate Limits</h5>
        <ul>
            <li>Free API keys: 10 requests per day</li>
            <li>Premium API keys: 100 requests per day with priority processing</li>
        </ul>
    </div>
</div>

<div class="card mb-4">
    <div class="card-header">
        <h4>Getting an API Key</h4>
    </div>
    <div class="card-body">
        <div class="row">
            <div class="col-md-6">
                <h5>Free API Key</h5>
                <ol>
                    <li>Join our Discord server at <a href="https://discord.gg/ndBesNUMw5" target="_blank">https://discord.gg/ndBesNUMw5</a></li>
                    <li>Use the <code>/request_free</code> command</li>
                    <li>The bot will send your API key via Discord DM</li>
                </ol>
                <div class="alert alert-info">
                    <strong>Note:</strong> Only one free key per Discord account is allowed.
                </div>
            </div>
            <div class="col-md-6">
                <h5>Premium API Key</h5>
                <p>For premium access with higher rate limits and priority support:</p>
                <ol>
                    <li>Join our Discord server at <a href="https://discord.gg/ndBesNUMw5" target="_blank">https://discord.gg/ndBesNUMw5</a></li>
                    <li>Contact an admin in the server to discuss premium access</li>
                    <li>Premium keys are issued manually after verification</li>
                </ol>
            </div>
        </div>

        <div class="alert alert-warning mt-3">
            <h6>Important Security Notes:</h6>
            <ul class="mb-0">
                <li>Keep your API key secure and don't share it with others</li>
                <li>Make sure you have Discord DMs enabled to receive your key</li>
                <li>Contact an admin immediately if you suspect your key has been compromised</li>
            </ul>
        </div>
    </div>
</div>

<div class="card">
    <div class="card-header">
        <h4>Example Usage</h4>
    </div>
    <div class="card-body">
        <pre><code>curl -X POST \
    -H "X-API-Key: your-api-key" \
    -F "ipa=@app.ipa" \
    -F "p12=@cert.p12" \
    -F "mobileprovision=@profile.mobileprovision" \
    -F "p12_password=your-password" \
    https://your-domain.com/api/sign</code></pre>
    </div>
</div>
{% endblock %}
